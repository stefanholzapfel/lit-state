{"version":3,"file":"react.js","sourceRoot":"","sources":["../src/lib/react.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n// TODO: Write a UMD->module shim or take React as an argument to\n// createReactComponent so we don't have to worry about how to load React.\nimport * as ReactModule from 'react';\n\nimport {UpdatingElement} from './updating-element.js';\n\nexport type Constructor<T> = {\n  new (): T;\n};\n\nconst reservedReactProperties =\n    [ 'children', 'localName', 'ref', 'style', 'className' ];\n\n/**\n *  Creates a React component from a LitElement or UpdatingElement.\n */\nexport const createReactComponent =\n    <T extends UpdatingElement>(React: any, clazz: Constructor<T>,\n                                tagName: string):\n        ReactModule.ComponentClass<T, void> => {\n      const Component: ReactModule.ComponentClass = React.Component;\n      const createElement: typeof ReactModule.createElement =\n          React.createElement;\n\n      const setProperty = (node: T, name: string, value: any, old: any) => {\n        if ((clazz as any)._classProperties.has(name)) {\n          node[name as keyof T] = value;\n        } else if (name[0] === 'o' && name[1] === 'n') {\n          // TODO(justinfagnani): camel-case to kebab-case conversion?\n          if (old) {\n            node.removeEventListener(name.substring(2), old);\n          }\n          if (value) {\n            node.addEventListener(name.substring(2), value);\n          }\n        } else {\n          node.setAttribute(name, value);\n        }\n      };\n\n      return (class extends Component {\n        base!: T;\n        ref!: any;\n\n        constructor(props: {}) {\n          super(props);\n          this.ref = (c: T) => {\n            this.base = c;\n            if ((this.props as any).ref) {\n              (this.props as any).ref(c);\n            }\n          };\n        }\n\n        componentDidMount() {\n          for (const i in this.props) {\n            if (reservedReactProperties.indexOf(i) === -1) {\n              setProperty(this.base, i, (this.props as any)[i], null);\n            }\n          }\n        }\n\n        componentDidUpdate(old: any) {\n          const {props} = this;\n          for (const i in props) {\n            if (reservedReactProperties.indexOf(i) === -1 &&\n                (props as any)[i] !== old[i]) {\n              setProperty(this.base, i, (props as any)[i], old[i]);\n            }\n          }\n          for (const i in old) {\n            if (reservedReactProperties.indexOf(i) === -1 && !(i in props)) {\n              setProperty(this.base, i, null, old[i]);\n            }\n          }\n        }\n\n        componentWillUnmount() {\n          for (const i in this.props) {\n            if (reservedReactProperties.indexOf(i) === -1) {\n              setProperty(this.base, i, null, null);\n            }\n          }\n        }\n        render() {\n          const props = {ref : this.ref};\n          for (const i in this.props) {\n            if (reservedReactProperties.indexOf(i) !== -1) {\n              (props as any)[i] = (this.props as any)[i];\n            }\n          }\n          return createElement(tagName, props, this.props.children);\n        }\n      } as any as ReactModule.ComponentClass<T, void>);\n    };\n"]}